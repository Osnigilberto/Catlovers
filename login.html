<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&display=swap" rel="stylesheet">
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Catlovers - Login</title>
  <link rel="icon" href="assets/favicon2.png" type="image/x-icon">
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="assets/favicon2.png" type="image/x-icon">
  <link rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a1d4c0f36c.js" crossorigin="anonymous"></script>
  <script type="text/javascript" src="validation.js" defer></script>

</head>

<body>

  <div class="wrapper">
    <h1>Login</h1>
    <form id="loginForm">

      <div>
        <label for="lastname-input">
          <i class="fa-solid fa-envelope"></i>
        </label>
        <input type="email" name="email" id="email-input" placeholder="Email">
        <span class="error-message" id="email-error"></span>
      </div>
      <div>
        <label for="password-input">
          <i class="fa-solid fa-lock"></i>
        </label>
        <input type="password" name="password" id="password-input" placeholder="Password">
        <i class="fa-solid fa-eye" id="btn-senha" onclick="mostrarSenha()"></i>
        <span class="error-message" id="password-error"></span>
      </div>
      <div class="nav-login">
        <a href="forgot-password.html">Esqueceu a senha?</a>
      </div>

      <button type="submit">Entrar</button>
    </form>
    <p>ANew here? <a href="index.html">Create an Account</a></p>
  </div>
  <!-- Background Image -->
  <div class="bg-image">
    <img src="assets/bg.jpg" alt="">
  </div>
  <script>

    document.getElementById('loginForm').addEventListener('submit', function (e) {
      e.preventDefault(); // Impede o envio padrão do formulário

      // Limpa as mensagens de erro anteriores
      clearErrors();

      // Captura os valores dos campos
      const email = document.getElementById('email-input').value.trim();
      const password = document.getElementById('password-input').value.trim();

      let hasError = false;

      // Validação do email
      if (!validateEmail(email)) {
        showError('email-error', 'Por favor, insira um email válido.');
        hasError = true;
      }

      // Validação da senha
      if (password.length < 6) {
        showError('password-error', 'A senha deve ter pelo menos 6 caracteres.');
        hasError = true;
      }

      // Se não houver erros, o formulário pode ser enviado
      if (!hasError) {
        alert('Login efetuado com sucesso!');
      }
    });

    // Função para validar email com Regex (igual à do signup)
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(String(email).toLowerCase());
    }

    // Função para exibir a mensagem de erro (igual à do signup)
    function showError(id, message) {
      const errorElement = document.getElementById(id);
      errorElement.innerText = message;
      errorElement.style.display = 'block';
    }

    // Função para limpar as mensagens de erro (igual à do signup)
    function clearErrors() {
      const errors = document.querySelectorAll('.error-message');
      errors.forEach(error => {
        error.innerText = '';
        error.style.display = 'none';
      });
    }

    // Função para mostrar/esconder a senha
    function mostrarSenha() {
      const passwordInput = document.getElementById('password-input');
      const eyeIcon = document.getElementById('btn-senha');
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
      } else {
        passwordInput.type = 'password';
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
      }
    }

  </script>
</body>

</html>